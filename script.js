
const arrow = document.getElementById('mover');
const curve = document.getElementById('curve');

const PATH = "M74 2C67.6972 47.0194 68.6945 74.0978 84.8838 108.5C91.591 122.753 103.5 131.5 116.134 162.856C134.544 208.547 108.367 266.381 84.8838 304.961C65.5417 336.738 36.2395 367.991 27.4823 405.208C20.2043 436.14 14.089 465.562 30.7718 494.436C34.6151 501.088 38.9591 507.774 43.8487 514.112M43.8487 514.112C53.26 526.311 64.6929 537.219 78.4693 544.107C103.182 556.463 128.663 553.275 134.062 522.232C138.469 496.888 119.804 484.655 96.3148 480.867C75.6968 477.541 52.6386 494.796 43.8487 514.112ZM43.8487 514.112C42.6769 516.687 41.7587 519.298 41.1337 521.903C33.101 555.372 33.0014 596.806 40.8047 630.62C46.8276 656.719 59.4572 683.057 71.3969 706.936C83.3996 730.942 92.3082 750.398 94.0121 777.66C95.4221 800.219 90.3261 809.419 73.3706 823.548C36.9653 853.886 30.0497 897.92 41.1337 941.148C46.1957 960.89 56.3387 978.266 62.1864 997.48C62.9844 1000.1 63.7503 1002.87 64.4602 1005.75M64.4602 1005.75C72.3858 1037.86 73.3425 1083.61 34.308 1092.79C15.9214 1097.12 5.90692 1068.68 3.14014 1056.03C-1.94169 1032.8 5.70841 1019.95 26.002 1010.06C37.4612 1004.48 52.0212 1006.31 64.4602 1005.75ZM64.4602 1005.75C97.5164 1004.26 113.175 1035.5 126.66 1060.88C177.987 1157.5 100.124 1153.43 64 1200.5C23.7038 1253 84.5304 1263.07 97.509 1316.5C108.822 1363.07 80.6385 1374.47 64 1405.5C34.9769 1459.62 135 1662 64 1695C3.50004 1723.12 1.99465 1610.59 40 1609.5C149.74 1606.34 121.535 1863.38 85.2656 1922.96C65.9235 1954.74 36.6213 1985.99 27.8642 2023.21C20.5861 2054.14 14.4709 2083.56 31.1536 2112.44C34.997 2119.09 39.3409 2125.77 44.2305 2132.11M44.2305 2132.11C53.6418 2144.31 65.0747 2155.22 78.8512 2162.11C103.564 2174.46 129.045 2171.28 134.443 2140.23C138.851 2114.89 120.185 2102.65 96.6966 2098.87C76.0787 2095.54 53.0205 2112.8 44.2305 2132.11ZM44.2305 2132.11C43.0588 2134.69 42.1406 2137.3 41.5155 2139.9C33.4829 2173.37 33.3832 2214.81 41.1866 2248.62C47.2095 2274.72 59.839 2301.06 71.7788 2324.94C83.7814 2348.94 92.69 2368.4 94.394 2395.66C95.8039 2418.22 90.7079 2427.42 73.7525 2441.55C37.3471 2471.89 30.4315 2515.92 41.5155 2559.15C46.5775 2578.89 56.7205 2596.27 62.5682 2615.48C63.3663 2618.1 64.1321 2620.87 64.8421 2623.75M64.8421 2623.75C72.7676 2655.86 73.7243 2701.61 34.6898 2710.79C16.3032 2715.12 6.28875 2686.68 3.52197 2674.03C-1.55985 2650.8 6.09025 2637.95 26.3839 2628.06C37.843 2622.48 52.403 2624.31 64.8421 2623.75ZM64.8421 2623.75C97.8982 2622.26 113.557 2653.5 127.042 2678.88C133.142 2690.37 134.968 2703.91 138.391 2716.39C148.88 2754.61 145.178 2772.5 104.882 2825C64.5856 2877.5 125.412 2887.57 138.391 2941C149.704 2987.57 121.52 2998.97 104.882 3030C75.8587 3084.12 84.3655 3177.1 74.3818 3238";
curve.setAttribute("d", PATH);

arrow.style.motionPath = `path("${PATH}")`
arrow.style.offsetPath = `path("${PATH}")`

const scrollY = () => window.scrollY ?? window.pageYOffset ?? document.documentElement.scrollTop

const adjustPointer = (t) => {// parameter 0->1 to parametrize position on curve
    t = Math.max(t, 0)
    t = Math.min(t, 1)

    mover.style.motionOffset = `${t * 100}%`
    mover.style.offsetDistance = `${t * 100}%`
}

window.addEventListener("scroll", () => {
    const { y, height } = curve.getBoundingClientRect()

    const curveInitial = y + scrollY();

    if (y < window.innerHeight / 2) {

        const p0 = curveInitial - window.innerHeight / 2;

        const t = (scrollY() - p0) / curve.getBoundingClientRect().height;

        adjustPointer(t)
    }
})







